 got a new error after i gave the following command:-
qemu-system-x86_64 -drive file=fedora_everything.qcow2,format=qcow2 -smp 3 -m 3G -enable-kvm -kernel /boot/Atharva-linux-6.16.3 -initrd /boot/initramfs-linux-Atharva.img -append "root=/dev/sda ro console=ttyS0" -nographic


error:-
:: running early hook [udev]
Warning: /lib/modules/6.16.3Atharva/modules.devname not found - ignoring
Starting systemd-udevd version 257.8-2-arch
:: running hook [udev]
:: Triggering uevents...
[    1.259385] input: ImExPS/2 Generic Explorer Mouse as /devices/platform/i8042/serio1/input/input3
:: running hook [keymap]
:: Loading keymap...kbd_mode: KDSKBMODE: Inappropriate ioctl for device
done.
:: performing fsck on '/dev/sda'
fsck.ext2: Bad magic number in super-block while trying to open /dev/sda
/dev/sda: 
The superblock could not be read or does not describe a valid ext2/ext3/ext4
filesystem.  If the device is valid and it really contains an ext2/ext3/ext4
filesystem (and not swap or ufs or something else), then the superblock
is corrupt, and you might try running e2fsck with an alternate superblock:
    e2fsck -b 8193 <device>
 or
    e2fsck -b 32768 <device>

Found a gpt partition table in /dev/sda
ERROR: fsck failed on '/dev/sda'
********************** WARNING **********************
*                                                   *
*  The root device is not configured to be mounted  *
*  read-write! It may be fsck'd again later.        *
*                                                   *
*****************************************************
:: mounting '/dev/sda' on real root
[    1.378946] EXT4-fs (sda): VFS: Can't find ext4 filesystem
[    1.379848] EXT4-fs (sda): VFS: Can't find ext4 filesystem
[    1.380725] EXT4-fs (sda): VFS: Can't find ext4 filesystem
[    1.381626] FAT-fs (sda): bogus number of reserved sectors
[    1.382253] FAT-fs (sda): Can't find a valid FAT filesystem
[    1.383311] FAT-fs (sda): bogus number of reserved sectors
[    1.383891] FAT-fs (sda): Can't find a valid FAT filesystem
[    1.401082] ISOFS: Unable to identify CD-ROM format.
mount: /new_root: wrong fs type, bad option, bad superblock on /dev/sda, missing codepage or helper program, or other .
       dmesg(1) may have more information after failed mount system call.
ERROR: Failed to mount '/dev/sda' on real root
You are now being dropped into an emergency shell.
sh: can't access tty; job control turned off


another error i got after i gave root=/dev/sda3
:: mounting '/dev/sda3' on real root
mount: /new_root: unknown filesystem type 'btrfs'.
       dmesg(1) may have more information after failed mount system call.
ERROR: Failed to mount '/dev/sda3' on real root
You are now being dropped into an emergency shell.
sh: can't access tty; job control turned off

so the type of the fs is the problem after all
both the / and /home are of btrfs but the boot is ext4 so maybe that will work

lol it seems like that was the problem:-
after giving it /dev/sda2 which is type ext4 it gave me the following error which is cute:-
:: running cleanup hook [udev]
ERROR: Root device mounted successfully, but /sbin/init does not exist.
Bailing out, you are on your own. Good luck.
/sbin/init is pointing to systemd
lrwxrwxrwx 1 root root      22 Aug  8 02:56 init -> ../lib/systemd/systemd



the problem probably lies in mkinitcpio or the way i configured the kernel
what is fsck?


to extract the contents of initramfs use the following:-
lsinitcpio -x /boot/initramfs-linux-Atharva.img usr/bin/run-init -c > run-init



i finally did it, i almost cried but fuckkkkkkk yeahhhhhhhhhh
all i did was install arch linux on that image and just used the following command:-
qemu-system-x86_64 -drive file=mini_arch.qcow2,format=qcow2 -smp 3 -m 3G -enable-kvm -kernel /boot/Atharva-linux-6.16.3 -initrd /boot/initramfs-linux-Atharva.img -append "root=/dev/sda2 ro console=ttyS0" -nographic

or 

i can use :-
qemu-system-x86_64 -drive file=mini_arch.qcow2,format=qcow2 -smp 3 -m 3G -enable-kvm -kernel /boot/Atharva-linux-6.16.3 -initrd /boot/initramfs-linux-Atharva.img -append "root=/dev/sda2 ro console=ttyS0"

if i want to use the gui of qemu

i am so proud of myself.

but now i have to check if i can change the fs type while configuring the kernel

after adding support to btrfs the arch linux still works
qemu-system-x86_64 -drive file=~/Downloads/mini_arch.qcow2,format=qcow2 -smp 3 -m 3G -enable-kvm -kernel /boot/vmlinuz-lord-Atharva -initrd /boot/initramfs-linux-lord-Atharva.img -append "root=/dev/sda2 ro console=ttyS0" -nographic


for fedora_everything.qcow2 it gives following error:-
:: mounting '/dev/sda3' on real root
[    1.882751] BTRFS: device label fedora_fedora devid 1 transid 378 /dev/sda3 (8:3) scanned by mount (17)
[    1.884768] BTRFS info (device sda3): first mount of filesystem dd384c01-d15a-4cc7-aa47-f5dc1990390e
[    1.885751] BTRFS info (device sda3): using crc32c (crc32c-generic) checksum algorithm
[    1.886604] BTRFS info (device sda3): using free-space-tree
:: running cleanup hook [udev]
ERROR: Root device mounted successfully, but /sbin/init does not exist.
Bailing out, you are on your own. Good luck.

sh: can't access tty; job control turned off


